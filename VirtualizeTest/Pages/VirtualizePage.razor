@page "/virtualize"

@*Uncomment to test the solution using the Virtualize component*@
<div style="height:500px;overflow-y:scroll">
    <Virtualize Items="@TestComponents" TItem="TestComponentViewModel" Context="component">
        <TestComponent @key="component.Index" ViewModel="component"/>
    </Virtualize>
</div>

@*Uncomment to test the solution without using the Virtualize component*@
@*@if (TestComponents != null)
{
    foreach (var component in TestComponents)
    {
        <TestComponent @key="component.Index" ViewModel="component" />
    }
}*@

@code {
    public List<TestComponentViewModel>? TestComponents;

    protected override void OnInitialized()
    {
        TestComponents = new List<TestComponentViewModel>();

        for (int i = 0; i < 1000; i++)
        {
            TestComponents.Add(new TestComponentViewModel(i));
        }

        base.OnInitialized();
    }
}
